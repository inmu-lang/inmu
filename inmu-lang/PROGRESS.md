# INMU ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—çŠ¶æ³

**æ›´æ–°æ—¥**: 2026å¹´1æœˆ11æ—¥

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

INMUè¨€èªžã¯ã€ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚’ç›®æŒ‡ã™ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªžãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚Rustã®ãƒ–ãƒ¼ãƒˆã‚¹ãƒˆãƒ©ãƒƒãƒ—æˆ¦ç•¥ã«å€£ã„ã€æ®µéšŽçš„ã«å®Ÿè£…ã‚’é€²ã‚ã¦ã„ã¾ã™ã€‚

## ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

### Stage 0: ã‚¢ã‚»ãƒ³ãƒ–ãƒªã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ âœ… (å®Œäº†)

**å®Ÿè£…è¨€èªž**: ARM64/x86_64 ã‚¢ã‚»ãƒ³ãƒ–ãƒª  
**çŠ¶æ…‹**: åŸºæœ¬æ©Ÿèƒ½å®Ÿè£…æ¸ˆã¿

#### å®Œäº†ã—ãŸæ©Ÿèƒ½
- [x] åŸºæœ¬çš„ãª`print`ã‚³ãƒžãƒ³ãƒ‰ï¼ˆæ–‡å­—åˆ—ã¨å¤‰æ•°ï¼‰
- [x] å¤‰æ•°å®£è¨€ã¨ä¿å­˜ (`let x = 42`)
- [x] å¤‰æ•°ã®å‚ç…§ (`print x`)
- [x] ã‚³ãƒ¡ãƒ³ãƒˆå¯¾å¿œ (`#`)
- [x] ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
- [x] å˜ç´”ãªã‚³ãƒžãƒ³ãƒ‰ãƒ‘ãƒ¼ã‚µãƒ¼
- [x] å¤‰æ•°ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæœ€å¤§256å¤‰æ•°ï¼‰
- [x] macOSã§ã®ãƒ“ãƒ«ãƒ‰ã¨å®Ÿè¡Œï¼ˆARM64/x86_64ï¼‰

#### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
```
stage0/
â”œâ”€â”€ src/mac/arm64/main.s      # ARM64å®Ÿè£…
â”œâ”€â”€ src/mac/x86_64/main.s     # x86_64å®Ÿè£…
â””â”€â”€ Makefile
```

### Stage 1: ãƒŸãƒ‹ãƒžãƒ«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ© ðŸš§ (å®Ÿè£…ä¸­)

**å®Ÿè£…è¨€èªž**: INMUè¨€èªž  
**å®Ÿè¡Œç’°å¢ƒ**: Stage 0ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿  
**çŠ¶æ…‹**: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©æœ¬ä½“ã®å®Ÿè£…å®Œäº†ã€Stage 0ã®æ©Ÿèƒ½æ‹¡å¼µãŒå¿…è¦

#### å®Œäº†ã—ãŸä½œæ¥­
- [x] ãƒ¬ã‚­ã‚µãƒ¼å®Ÿè£… (`compiler/lexer.inmu`)
- [x] ãƒ‘ãƒ¼ã‚µãƒ¼å®Ÿè£… (`compiler/parser.inmu`)
- [x] ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå™¨å®Ÿè£… (`compiler/codegen.inmu`)
- [x] ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ  (`compiler/main.inmu`)
- [x] ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªéª¨æ ¼ (`runtime/stdlib.inmu`)
- [x] ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆ (5å€‹)
- [x] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
- [x] Makefileä½œæˆ

#### å®Ÿè£…ã•ã‚ŒãŸã‚³ãƒ³ãƒ‘ã‚¤ãƒ©æ©Ÿèƒ½

**å­—å¥è§£æžå™¨ (Lexer)**:
- ãƒˆãƒ¼ã‚¯ãƒ³åŒ–
- ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰èªè­˜ (`let`, `fn`, `if`, `else`, `while`, `for`, `return`, etc.)
- æ•°å€¤ãƒªãƒ†ãƒ©ãƒ« (æ•´æ•°ã€æµ®å‹•å°æ•°ç‚¹)
- æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ« (ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å¯¾å¿œ)
- æ¼”ç®—å­èªè­˜ (ç®—è¡“ã€æ¯”è¼ƒã€è«–ç†)
- ã‚³ãƒ¡ãƒ³ãƒˆã®ã‚¹ã‚­ãƒƒãƒ—

**æ§‹æ–‡è§£æžå™¨ (Parser)**:
- å†å¸°ä¸‹é™ãƒ‘ãƒ¼ã‚µãƒ¼
- ASTç”Ÿæˆ
- æ¼”ç®—å­ã®å„ªå…ˆé †ä½å‡¦ç†
- ä»¥ä¸‹ã®æ§‹æ–‡ã‚’ã‚µãƒãƒ¼ãƒˆ:
  - å¤‰æ•°å®£è¨€ (`let x = 10`)
  - é–¢æ•°å®šç¾© (`fn add(a, b) { ... }`)
  - æ¡ä»¶åˆ†å² (`if`/`else`)
  - ãƒ«ãƒ¼ãƒ— (`while`)
  - returnæ–‡
  - å¼ã¨æ¼”ç®—

**ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå™¨ (CodeGen)**:
- ARM64ã‚¢ã‚»ãƒ³ãƒ–ãƒªç”Ÿæˆ
- ãƒ¬ã‚¸ã‚¹ã‚¿å‰²ã‚Šå½“ã¦ (x9-x15ã‚’ä½¿ç”¨)
- ã‚¹ã‚¿ãƒƒã‚¯ãƒ•ãƒ¬ãƒ¼ãƒ ç®¡ç†
- é–¢æ•°å‘¼ã³å‡ºã—è¦ç´„ã®å®Ÿè£…
- äºŒé …æ¼”ç®—å­ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
- åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ

#### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
1. `test_arithmetic.inmu` - ç®—è¡“æ¼”ç®—
2. `test_functions.inmu` - é–¢æ•°å®šç¾©ã¨å‘¼ã³å‡ºã—
3. `test_if.inmu` - æ¡ä»¶åˆ†å²
4. `test_while.inmu` - whileãƒ«ãƒ¼ãƒ—
5. `test_fibonacci.inmu` - ãƒ•ã‚£ãƒœãƒŠãƒƒãƒæ•°åˆ—ï¼ˆå†å¸°ï¼‰

#### æ¬¡ã«å¿…è¦ãªä½œæ¥­

**é‡è¦**: Stage 1ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã¯INMUè¨€èªžã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ãŸã‚ã€Stage 0ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ãŒã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

**Stage 0ã¸ã®æ©Ÿèƒ½è¿½åŠ ãŒå¿…è¦**:
1. âœ… å¤‰æ•°å®£è¨€ - å®Œäº†
   ```inmu
   let x = 10
   ```

2. å¼ã®è©•ä¾¡ã¨ç®—è¡“æ¼”ç®—
   ```inmu
   let result = x + 5
   let product = a * b
   ```

3. å¤‰æ•°ã¸ã®å†ä»£å…¥
   ```inmu
   x = x + 5
   ```

4. é–¢æ•°å®šç¾©ã¨å‘¼ã³å‡ºã—
   ```inmu
   fn add(a, b) {
       return a + b
   }
   let result = add(10, 20)
   ```

5. åˆ¶å¾¡æ§‹é€ 
   ```inmu
   if x > 0 { ... } else { ... }
   while i < 10 { ... }
   ```

6. é…åˆ—æ“ä½œ
   ```inmu
   let arr = [1, 2, 3]
   arr[0]
   arr.push(4)
   ```

7. æ§‹é€ ä½“ï¼ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
   ```inmu
   struct Point { x: int, y: int }
   let p = Point { x: 10, y: 20 }
   ```

8. ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ
   ```inmu
   let content = read_file("input.txt")
   write_file("output.txt", "Hello")
   ```

### Stage 2: ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° â³ (æœªç€æ‰‹)

**ç›®æ¨™**: Stage 1ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©è‡ªèº«ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

### Stage 3: æœ€é©åŒ–ã‚³ãƒ³ãƒ‘ã‚¤ãƒ© â³ (æœªç€æ‰‹)

**ç›®æ¨™**: æœ€é©åŒ–ã¨ãƒ•ãƒ«æ©Ÿèƒ½ã®å®Ÿè£…

## ãƒžã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

### âœ… ãƒžã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ 0: Stage 0å®Œæˆ (2026å¹´1æœˆ)
- [x] ARM64ã‚¢ã‚»ãƒ³ãƒ–ãƒªã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿å®Ÿè£…
- [x] åŸºæœ¬çš„ãªprintæ©Ÿèƒ½

### ðŸš§ ãƒžã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ 1: Stage 0æ©Ÿèƒ½æ‹¡å¼µ (ç›®æ¨™: 2026å¹´3æœˆ)
- [x] å¤‰æ•°ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- [ ] å¼ã®è©•ä¾¡ã¨ç®—è¡“æ¼”ç®—
- [ ] å¤‰æ•°ã¸ã®å†ä»£å…¥
- [ ] é–¢æ•°å®šç¾©ã¨å‘¼ã³å‡ºã—
- [ ] åˆ¶å¾¡æ§‹é€  (if/while)
- [ ] é…åˆ—æ“ä½œ
- [ ] æ§‹é€ ä½“ã‚µãƒãƒ¼ãƒˆ
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«I/Oæ‹¡å¼µ

### â³ ãƒžã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ 2: Stage 1å®Œæˆ (ç›®æ¨™: 2026å¹´6æœˆ)
- [x] ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©å®Ÿè£…ï¼ˆINMUè¨€èªžã§ï¼‰
- [ ] Stage 0ã§Stage 1ã‚’å®Ÿè¡Œ
- [ ] ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆæ•´å‚™

### â³ ãƒžã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ 3: ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°é”æˆ (ç›®æ¨™: 2026å¹´8æœˆ)
- [ ] inmuc1ã§inmuc0ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
- [ ] inmuc1 == inmuc2ã®æ¤œè¨¼
- [ ] å†ç¾å¯èƒ½ãƒ“ãƒ«ãƒ‰

### â³ ãƒžã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ 4: å®‰å®šç‰ˆãƒªãƒªãƒ¼ã‚¹ (ç›®æ¨™: 2026å¹´12æœˆ)
- [ ] æœ€é©åŒ–ãƒ‘ã‚¹å®Ÿè£…
- [ ] æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå……å®Ÿ
- [ ] v1.0ãƒªãƒªãƒ¼ã‚¹

## é–‹ç™ºå„ªå…ˆé †ä½

### æœ€å„ªå…ˆ (ä»Šé€±)
1. âœ… Stage 0ã«å¤‰æ•°ã‚·ã‚¹ãƒ†ãƒ ã‚’è¿½åŠ  - å®Œäº†
2. Stage 0ã«å¼ã®è©•ä¾¡æ©Ÿèƒ½ã‚’è¿½åŠ ï¼ˆç®—è¡“æ¼”ç®—ï¼‰
3. Stage 0ã«å¤‰æ•°ã¸ã®å†ä»£å…¥æ©Ÿèƒ½ã‚’è¿½åŠ 

### é«˜å„ªå…ˆ (ä»Šæœˆ)
4. Stage 0ã«é–¢æ•°å®šç¾©æ©Ÿèƒ½ã‚’è¿½åŠ 
5. Stage 0ã«if/elseå®Ÿè£…
6. Stage 0ã«whileãƒ«ãƒ¼ãƒ—å®Ÿè£…
7. Stage 1ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚’Stage 0ã§å®Ÿè¡Œã—ã¦ãƒ†ã‚¹ãƒˆ

### ä¸­å„ªå…ˆ (æ¥æœˆ)
8. é…åˆ—æ“ä½œã®ã‚µãƒãƒ¼ãƒˆ
9. æ§‹é€ ä½“ã®ã‚µãƒãƒ¼ãƒˆ
10. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçµ±è¨ˆ

### ã‚³ãƒ¼ãƒ‰é‡
- Stage 0 (Assembly):
  - main.s: ~330è¡Œ
  - print.s: ~276è¡Œ
  - variables.s: ~399è¡Œ
  - **åˆè¨ˆ**: ~1,005è¡Œ
- Stage 1 (INMUè¨€èªž):
  - Lexer: ~360è¡Œ
  - Parser: ~470è¡Œ
  - CodeGen: ~430è¡Œ
  - Main: ~50è¡Œ
  - Tests: ~50è¡Œ
  - **åˆè¨ˆ**: ~1,360è¡Œ

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- README.md
- BOOTSTRAP.md
- language-spec.md (421è¡Œ)
- compiler-design.md (æ–°è¦ä½œæˆ)
- stage1/README.md

## ãƒªã‚¹ã‚¯ç®¡ç†

### ç¾åœ¨ã®ãƒªã‚¹ã‚¯

1. **Stage 0ã®è¤‡é›‘æ€§å¢—åŠ ** (é«˜)
   - è§£æ±ºç­–: ã‚¢ã‚»ãƒ³ãƒ–ãƒªã‚³ãƒ¼ãƒ‰ã‚’æ…Žé‡ã«è¨­è¨ˆã€ååˆ†ãªãƒ†ã‚¹ãƒˆ

2. **ãƒ‡ãƒãƒƒã‚°ã®å›°é›£ã•** (ä¸­)
   - è§£æ±ºç­–: æ®µéšŽçš„ãªæ©Ÿèƒ½è¿½åŠ ã€è©³ç´°ãªãƒ­ã‚°å‡ºåŠ›

3. **æ™‚é–“ä¸è¶³** (ä¸­)
   - è§£æ±ºç­–: å„ªå…ˆé †ä½ã‚’æ˜Žç¢ºåŒ–ã€MVP(Minimum Viable Product)é‡è¦–

## å­¦ç¿’ãƒªã‚½ãƒ¼ã‚¹

### å‚è€ƒã«ã—ã¦ã„ã‚‹è³‡æ–™
- "Crafting Interpreters" by Robert Nystrom
- ARM64 Architecture Reference Manual
- Rust compiler bootstrap process
- "Engineering a Compiler" by Cooper & Torczon

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### ä»Šé€±ã®ä½œæ¥­
1. Stage 0ã®ã‚¢ã‚»ãƒ³ãƒ–ãƒªã‚³ãƒ¼ãƒ‰ã«å¤‰æ•°ã‚·ã‚¹ãƒ†ãƒ ã‚’è¿½åŠ 
2. ç°¡å˜ãªå¤‰æ•°æ“ä½œã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
3. é–¢æ•°å®šç¾©ã®åŸºæœ¬æ§‹é€ ã‚’è¨­è¨ˆ

### æ¥é€±ã®ä½œæ¥­
4. é–¢æ•°å‘¼ã³å‡ºã—ã‚¹ã‚¿ãƒƒã‚¯ã®å®Ÿè£…
5. if/elseåˆ¶å¾¡æ§‹é€ ã®è¿½åŠ 
6. Stage 1ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®ç°¡æ˜“ç‰ˆã‚’Stage 0ã§å®Ÿè¡Œ

## è²¢çŒ®ã¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®è²¢çŒ®ã€ãƒã‚°å ±å‘Šã€æ©Ÿèƒ½ææ¡ˆã‚’æ­“è¿Žã—ã¾ã™ï¼

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

---

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®é€²æ—**: ç´„15% (Stage 0å®Œäº†ã€Stage 1å®Ÿè£…å®Œäº†ã€Stage 0æ©Ÿèƒ½æ‹¡å¼µãŒæ®‹ã£ã¦ã„ã‚‹)
